SNS("SNS.widget.ShortLink",function(){var e=YAHOO.lang,a=YAHOO.util.Event,d=YAHOO.util.Dom,c=SNS.sys.Helper,f=YAHOO.util.Get,b=YAHOO.util.Anim;SNS.widget.ShortLink={setpos:function(j,h,i){var g=d.getXY(h);d.setStyle(j,"display","block");d.setStyle(j,"top",g[1]+24+"px");d.setStyle(j,"left",g[0]+(h.offsetWidth/8)+"px");d.getFirstChild(d.getElementsByClassName("native-url","span",j)[0]).innerHTML="\u6e90\u94fe\u63a5:"+i},show:function(k,l){var h=a.getRelatedTarget(k),n=window.document,i=n.body;if(h!=l&&!d.isAncestor(l,h)){var o=d.getXY(l);var g=l.innerHTML,m=d.getAttribute(l.parentNode,"data-sr"),j=d.getAttribute(l.parentNode,"data-url");if(m){var p=d.get("J_urlPop");SNS.widget.ShortLink.setpos(p,l,m)}else{new SNS.sys.BasicDataSource({url:j,parms:{shorturl:g},success:function(u){if(u.errorcode==="0"&&u.sourceurl!==""){var q=d.get("J_urlPop"),s;if(u.sourceurl.split("").length>40){s=u.sourceurl.substring(0,40)+"..."}else{s=u.sourceurl}if(!q){var w,v,r,t,s;w=n.createElement("DIV");w.id="J_urlPop";w.className="url-wrapper";v=n.createElement("SPAN");v.className="native-url";r=n.createElement("B");t=n.createElement("S");r.appendChild(n.createTextNode("\u6e90\u94fe\u63a5:"+s));v.appendChild(r);v.appendChild(t);w.appendChild(v);i.appendChild(w);d.setStyle(w,"display","block");d.setStyle(w,"top",o[1]+24+"px");d.setStyle(w,"left",o[0]+(l.offsetWidth/8)+"px");d.setAttribute(l.parentNode,"data-sr",s)}else{SNS.widget.ShortLink.setpos(q,l,s);d.setAttribute(l.parentNode,"data-sr",s)}}else{return}}}).jsonp()}}},hide:function(j,i){var g=d.get("J_urlPop"),h=a.getRelatedTarget(j);if(h!=i&&!d.isAncestor(i,h)){d.setStyle(g,"display","none")}}}});
