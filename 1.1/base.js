SNS("SNS.Base",function(){var e=SNS,k=KISSY,a=k.DOM,p=k.Event,g=k.log,i=SNS.sys.Helper;var b=function(q){};b.prototype={addAttrs:function(r){for(var q in r){this.addAttr(q,r[q])}},addAttr:function(r,q){if(!this._attrs){this._attrs={}}this._attrs[r]=k.clone(q);if(q.to&&this.addAssocATD){this.addAssocATD(r,q.to)}},hasAttr:function(q){if(!this._attrs){this._attrs={}}return q&&(q in this._attrs)},removeAttr:function(q){if(this.hasAttr(q)){delete this.attrs.name}return this},set:function(r,s){var q=this.get(r);if(q===s){return}this.fire&&this.fire(r,"attrChange",q,s);this._setAttr(r,s)},_setAttr:function(q,t){var s=this,u,r=s._attrs[q],v=r&&r.setter;if(v){u=v.call(s,t)}if(u!==undefined){t=u}if(!s._attrs[q]){s._attrs[q]={}}s._attrs[q].value=t},get:function(s){if(!this._attrs||!this._attrs[s]){return}var u=this,t,q,r;t=u._attrs[s];q=t&&t.getter;r=this._attrs[s].value;if(q){r=q.call(u,r)}return r}};var j=["attrChange","dataChange"];var d=function(s){var q=false;for(var r=0;r<j.length;r++){if(j[r]===s){q=true}}return q};var n=function(q){this.ons(q)};n.prototype={on:function(u,t,s,r){r=r?r:this;if(k.isString(s)){s=r[s]}if(k.isString(u)){u=k.trim(u).split(",")}if(KISSY.isArray(s)){for(var q=0;q<s.length;q++){n.on(u,t,s[q],r)}return}if(!s){s=function(){}}if(!d(t)){KISSY.Event.on(u,t,s,r)}else{KISSY.EventTarget.on(u+"_"+t,s,r)}},ons:function(r,q){for(var t in r){var u=r[t];for(var s in u){this.on(s,t,u[s],q)}}},un:function(t,s,r,q){if(!d(s)){KISSY.Event.remove(t,s,r,q)}else{KISSY.EventTarget.remove(t+"_"+s,r,q)}},fire:function(r,q){if(d(q)){KISSY.EventTarget.fire(r+"_"+q)}},delegates:function(s,q,r){r=r?r:this;for(var u in s){var v=s[u];for(var w in v){var t=v[w];this.delegate(u,v[w],q,w,r)}}},_createDelegate:function(u,t,s,r){var q=this;return function(x){var w=x.target;if(u=="mouseout"||u=="mouseover"){}if(w){if(k.isString(s)){s=k.trim(s).split(",")}for(var v=0;v<s.length;v++){var y=s[v];if(u=="mouseout"||u=="mouseover"){if(a.test(w,y)){t.call(q,x,w);break}}else{if(a.test(w,y)||(w=a.parent(w,y))){t.call(q,x,w);break}}}}}},delegate:function(x,w,q,v,u){var r=this;if(!q){q=document.body}u=u?u:this;if(k.isString(w)){w=u[w]}if(k.isArray(w)){for(var t=0;t<w.length;t++){r.delegate(x,w[t],q,v,u)}return}if(!w){w=function(){}}if(x=="focus"){x="focusin"}if(x=="blur"){x="focusout"}if(x=="mouseenter"){x="mouseover"}if(x=="mouseleave"){x="mouseout"}var s=this._createDelegate(x,w,v,u);this.on(q,x,s,this,this)}};var m=function(q){};m.prototype={addData:function(r,q){if(!this._data){this._data={}}if(KISSY.isString(q)){q={url:q}}this._data[r]=k.clone(q)},addDatas:function(q){for(var r in q){this.addData(r,q[r])}},setData:function(r,q){var s=this.get(r);if(s){q=k.mix(s,q)}this.addData(r,q)},getData:function(q){if(!this.hasData(q)){return}return this._data[q]},hasData:function(q){if(!this._data){this._data={}}return q&&(q in this._data)},loadData:function(s,u,t){if(!this.hasData(s)){return}var q=this;var r=k.mix({},this._data[s]);r.data=k.mix(r.data||{},t);r.success=function(v){q._data[s].result=v;u(v);q.fire&&q.fire(s,"dataChange",q._data[s].result)};new SNS.request(i.getApiURI(r.url),r)},simpleLoadData:function(q,x){var s=q,y=arguments,t=y.length,r,z,w={};for(var v=2;v<t;v++){r=y[v];if(!r){continue}if(r.nodeType){var u=a.attr(r,"data-param");if(u){r=k.JSON.parse(u)}else{r={}}}w=k.mix(w,r)}z=function(A){if(A.status==="0"){x(A)}else{i.showMessage(A.msg)}};this.loadData(s,z,w)}};var f=function(){};f.prototype={addAssocs:function(q){for(var s in q){if(s=="DOMToAttr"){for(var r in q[s]){this.addAssocDTA(r,q[s][r])}}if(s=="AttrToDom"){for(var r in q[s]){this.addAssocATD(r,q[s][r])}}}},addAssocDTA:function(r,q){if(!this._assocDTA){this._assocDTA={}}var s=q;if(KISSY.isString(s)){q={};q.name=s}this._assocDTA[r]=k.clone(q);if(q.both){this.addAssocATD([q.name],{name:r})}},addAssocATD:function(r,q){if(!this._assocATD){this._assocATD={}}var s=q;if(KISSY.isString(s)){q={};q.name=s}this._assocATD[r]=k.clone(q);if(q.both){this.addAssocDTA(q.name,{name:r})}},DOMToAttr:function(r){var q=this._assocDTA[r];if(!q){return}if(this.getDOM&&this.get){this.set(q.name,this.getDOM(r))}},AttrToDOM:function(q){var r=this._assocATD[q];if(!r){return}if(this.getDOM&&this.get){this.setDOM(r.name,this.get(q))}},assoc:function(){var q;for(q in this._assocATD){this.AttrToDom(q)}for(q in this._assocDTA){var r=this._assocDTA[q];if(!r.both){this.DOMToAttr(q)}}},AttrToDOMs:function(){var q;for(q in this._assocATD){this.AttrToDOM(q)}},DOMToAttrs:function(){var q;for(q in this._assocDTA){this.DOMToAttr(q)}}};var c=function(q){};c.prototype={addAOPCfg:function(u){var x,w,y,z=this,v,t,s;for(var q in u){for(var r in u[q]){x=u[q][r];y=this._getMatchFn(r);for(t=0;t<y.length;t++){if(KISSY.isArray(x)){for(s=0;s<x.length;s++){x=x.reverse();v=z[y[t]];z[y[t]]=this[q](v,x[s],z)}}else{v=z[y[t]];z[y[t]]=this[q](v,x,z)}}}}},before:function(s,t,r){var q=this;r=r?r:this;if(KISSY.isString(t)){t=q[t]}if(!t){t=function(){}}return function(){var v,u=arguments,w=function(){s.apply(r,u)};var x={arguments:u,target:s,halt:function(){v=true}};t.call(r,x);if(!v){w()}}},after:function(s,t,r){var q=this;r=r?r:this;if(KISSY.isString(t)){t=q[t]}if(!t){t=function(){}}return function(){var v,u=arguments,w=function(){s.apply(r,u)};var x={arguments:u,target:s,halt:function(){v=true}};x.result=w();t.call(r,x)}},around:function(s,t,r){var q=this;r=r?r:this;if(KISSY.isString(t)){t=q[t]}if(!t){t=function(){}}var q=this;return function(){var v,u=arguments,w=function(){s.apply(r,u)};var x={arguments:u,target:w,halt:function(){v=true}};t.call(r,x)}},_getMatchFn:function(r){var q=[];r=r.replace("*",".*");r=new RegExp(r);for(var s in this){if(r.test(s)){q.push(s)}}return q}};var o=function(){};o.prototype={addDomCfgs:function(q){for(var r in q){this.addDomCfg(r,q[r])}},addDomCfg:function(r,q){if(!this._dom){this._dom={}}this._dom[r]=k.clone(q);if(q.to&&this.addAssocDTA){this.addAssocDTA(r,q.to)}},getDOMCfg:function(q){if(!this._dom){this._dom={}}return this._dom[q]},_getDOMNode:function(q,s){var t,r;if(!q){return}if(q.selector){r=KISSY.DOM.get(q.selector,s)}if(q.parent){r=KISSY.DOM.parent(r||q.selector||s,q.parent)}if(q.child){r=KISSY.DOM.child(r||q.selector||q.parent||s,q.child)}return r},getDOM:function(s,t){if(!t&&this.get){t=a.get(this.get("rootNode"))}var q=this.getDOMCfg(s);var u,r;if(!q){return}r=this._getDOMNode(q,t);if(!r){return}if(q.attr){u=r;switch(q.attr){case"innerHTML":r=u.innerHTML;break;default:r=KISSY.DOM.attr(u,q.attr);break}}return r},setDOM:function(s,u,t){var q=this.getDOMCfg(s);var w,r;if(!q){return}r=this._getDOMNode(q,t);if(!r){return}if(q.attr){switch(q.attr){case"innerHTML":r.innerHTML=u;break;default:KISSY.DOM.attr(r,q.attr,u);break}}if(q.style){KISSY.DOM.css(w,q.style,u)}}};function l(s,r){if(r){for(var q in r){if(r.hasOwnProperty(q)){s._setAttr(q,r[q])}}}}function h(r){var w=this.constructor,t,s=0,y=[],z=[],v=[],q=[],x=[],u=[];while(w){s++;y.push(w.ATTRS);z.push(w.EVENTS);v.push(w.DATAS);q.push(w.DOMS);u.push(w.ASSOCS);x.push(w.AOPS);w=w.superclass?w.superclass.constructor:null}for(t=s-1;t>=0;t--){this.addAttrs(y[t])}l(this,r);for(t=s-1;t>=0;t--){this.addDatas(v[t])}for(t=s-1;t>=0;t--){this.addDomCfgs(q[t])}for(t=s-1;t>=0;t--){this.addAssocs(u[t])}for(t=s-1;t>=0;t--){this.addAOPCfg(x[t])}for(t=s-1;t>=0;t--){if(this.hasAttr("rootNode")){this.delegates(z[t],this.get("rootNode"),this)}else{this.ons(z[t])}}}h.extend=function(v,u,q,w){var t=v.prototype;KISSY.extend(v,u,q,w);KISSY.mix(v.prototype,t)};h._mixConfig=function(w,v){var y=function(t,A,s){var q=false;if(!(A in t)){t[A]=s;q=true}return q};if(!v||!w){return w}var z,u,x;for(z in v){if(z=="ATTRS"||z=="DATAS"||z=="DOMS"||z=="AOPS"){if(y(w,z,v[z])){continue}for(u in v[z]){if(y(w[z],u,v[z][u])){continue}}}if(z=="EVENTS"||z=="ASSOCS"){if(y(w,z,v[z])){continue}for(u in v[z]){if(y(w[z],u,v[z][u])){continue}for(x in v[z][u]){if(y(w[z][u],x,v[z][u][x])){continue}}}}y(w,z,v[x]);return w}};h.mix=function(){var s=arguments[0],r,q=arguments.length;for(r=1;r<q;++r){h._mixConfig(s,arguments[r])}return s};KISSY.augment(h,n,b,m,o,c,f);SNS.Base=h},"SNS.util.Ajax","SNS.util.Helper");
