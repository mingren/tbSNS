SNS("SNS.util.Storage",function(c,b){var f=b.DOM,d,e="",a="sns";d={getItem:function(g){return this._operateItem(g,"get")},setItem:function(g,h){return this._operateItem(g,"set",h)},removeItem:function(g){return this._operateItem(g,"remove")},_operateItem:function(h,j,m){var k=this,g,l;if("object"==typeof localStorage){g=localStorage}else{if("object"==typeof globalStorage){g=globalStorage(location.host)}}if(g){l=k._strToObj(g.getItem(a));if("get"===j){return l[h]}else{l[h]=m;return g[j+"Item"](a,k._objToStr(l))}}else{var i=f.get("#J_StorageUserData");if(!i){i=f.create("<input>",{id:"J_StorageUserData",type:"hidden",style:"behavior:url(#default#userData)"});document.body.appendChild(i)}if("set"===j){try{i[j+"Attribute"](h,m);i.save(a)}catch(n){}}else{try{i.load(a);l=i[j+"Attribute"](h);if("remove"!==j){return l}i.save(a)}catch(n){return""}}}},_objToStr:function(h){var j=e,g;for(g in h){j+=","+g+":"+h[g]}return j.substr(1)},_strToObj:function(g){return g?b.JSON.parse('{"'+g.replace(/(:|,)/g,'"$1"')+'"}'):{}}};return c.util.Storage=d});
